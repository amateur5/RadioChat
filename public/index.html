<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Aplikacija</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: black;
            color: white;
        }
        #chatContainer {
            display: flex;
            height: 600px;
            width: 800px;
            border: 1px solid white;
            overflow: hidden;
        }
        #chatArea {
            flex: 1;
            display: flex;
            flex-direction: column;
            border-right: 1px solid white;
        }
        #messages {
            flex: 1;
            padding: 10px;
            overflow-y: auto;
            background-color: black;
        }
        #inputContainer {
            display: flex;
            flex-direction: column;
            padding: 10px;
            background-color: black;
        }
        #toolbar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        button {
            background-color: gray;
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            flex: 1;
            margin: 0 5px;
        }
        button:hover {
            background-color: darkgray;
        }
        #guestList {
            width: 100px;
            padding: 10px;
            background-color: black;
            overflow-y: auto;
        }
        #messageInput {
            height: 50px;
            background-color: black;
            border: 1px solid white;
            color: white;
            padding: 5px;
            outline: none;
        }
        #messageInput[contenteditable="true"]:focus {
            border: 1px solid #fff;
        }
    </style>
</head>
<body>
    <div id="chatContainer">
        <div id="chatArea">
            <div id="toolbar">
                <button id="boldBtn">BOLD</button>
                <button id="italicBtn">ITALIC</button>
                <input type="color" id="colorPicker" value="#ffffff">
                <button id="loginBtn">LOGIN</button>
                <button id="mixerBtn">DJ Mixer</button>
            </div>
            <div id="messages"></div>
            <div id="inputContainer">
                <div id="messageInput" contenteditable="true" placeholder="Unesite poruku..." oninput="updateMessagePreview()"></div>
            </div>
        </div>
        <div id="guestList">
            <!-- Lista gostiju će se ovde prikazati -->
        </div>
    </div>

    <div id="mixerPanel" style="display:none;">
        <h3>DJ Mixer</h3>
        <input type="file" id="musicUpload" accept="audio/*">
        <audio id="audioPlayer" controls></audio>
        <button id="closeMixer">Zatvori</button>
    </div>

    <script>
        const messagesDiv = document.getElementById('messages');
        const messageInput = document.getElementById('messageInput');
        const boldBtn = document.getElementById('boldBtn');
        const italicBtn = document.getElementById('italicBtn');
        const colorPicker = document.getElementById('colorPicker');
        const loginBtn = document.getElementById('loginBtn');
        const mixerBtn = document.getElementById('mixerBtn');
        const mixerPanel = document.getElementById('mixerPanel');
        const musicUpload = document.getElementById('musicUpload');
        const audioPlayer = document.getElementById('audioPlayer');
        const closeMixer = document.getElementById('closeMixer');

        let isBold = false;
        let isItalic = false;
        let messageColor = '#ffffff';
        let guestNumber = 1; // Broj za goste

        // Funkcija za dodavanje novog gosta
        function addGuest() {
            const guestDiv = document.createElement('div');
            guestDiv.textContent = `Gost ${guestNumber++}`; // Dodeljuje jedinstveni broj gostu
            guestList.appendChild(guestDiv);
        }

        // Pozivanje funkcije da dodamo gosta
        addGuest();

        boldBtn.addEventListener('click', () => {
            isBold = !isBold;
            boldBtn.style.backgroundColor = isBold ? '#ddd' : 'gray'; // Promena boje dugmeta
        });

        italicBtn.addEventListener('click', () => {
            isItalic = !isItalic;
            italicBtn.style.backgroundColor = isItalic ? '#ddd' : 'gray'; // Promena boje dugmeta
        });

        colorPicker.addEventListener('input', (e) => {
            messageColor = e.target.value;
            updateMessagePreview();
        });

        function updateMessagePreview() {
            messageInput.style.color = messageColor;
            messageInput.style.fontWeight = isBold ? 'bold' : 'normal';
            messageInput.style.fontStyle = isItalic ? 'italic' : 'normal';
        }

        messageInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && messageInput.innerText.trim() !== '') {
                const message = messageInput.innerHTML;
                const messageElement = document.createElement('div');
                messageElement.innerHTML = `<span style="color: ${messageColor}; ${isBold ? 'font-weight: bold;' : ''} ${isItalic ? 'font-style: italic;' : ''}">Gost ${guestNumber - 1}: ${message}</span>`;
                messagesDiv.appendChild(messageElement);
                messageInput.innerHTML = ''; // Čisti polje nakon slanja
                updateMessagePreview(); // Resetuje stilove
                messagesDiv.scrollTop = messagesDiv.scrollHeight; // Pomera do kraja
            }
        });

        loginBtn.addEventListener('click', () => {
            const username = prompt('Unesite svoje korisničko ime:');
            const password = prompt('Unesite svoju lozinku:');
            if (username === 'Radio Galaksija' && password === 'marakana100-') {
                alert('Uspešno ste se prijavili kao DJ!');
            } else {
                alert('Pogrešno korisničko ime ili lozinka.');
            }
        });

        mixerBtn.addEventListener('click', () => {
            mixerPanel.style.display = 'block'; // Prikazuje DJ mikser
        });

        closeMixer.addEventListener('click', () => {
            mixerPanel.style.display = 'none'; // Sakriva DJ mikser
        });

        musicUpload.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const url = URL.createObjectURL(file);
                audioPlayer.src = url; // Učitava izabranu muziku
                audioPlayer.play(); // Automatski reprodukuje muziku
            }
        });

        document.addEventListener('contextmenu', (e) => {
            e.preventDefault(); // Sprečava prikazivanje default menija
            const controlPanel = document.createElement('div');
            controlPanel.style.position = 'absolute';
            controlPanel.style.top = `${e.clientY}px`;
            controlPanel.style.left = `${e.clientX}px`;
            controlPanel.style.backgroundColor = 'black';
            controlPanel.style.color = 'white';
            controlPanel.style.border = '1px solid white';
            controlPanel.style.padding = '10px';
            controlPanel.innerHTML = `
                <button onclick="deleteChat()">Obriši chat</button>
                <button onclick="openMixer()">Otvorite DJ Mixer</button>
            `;
            document.body.appendChild(controlPanel);

            document.addEventListener('click', () => {
                controlPanel.remove();
            }, { once: true });
        });

        function deleteChat() {
            messagesDiv.innerHTML = ''; // Briše chat poruke
        }

        function openMixer() {
            alert('Otvorite DJ mixer ovde'); // Primer akcije za DJ mixer
        }
    </script>
</body>
</html>
